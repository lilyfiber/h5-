{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap c2e49d7d0c5543dfb6a9","webpack:///./src/index.js","webpack:///./src/lib/index.ts","webpack:///./src/lib/scrollEnd.ts","webpack:///./src/lib/Set.ts"],"names":["Lazyload","require","module","exports","default"],"mappings":"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","file":"vue.lazyimg.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Lazyload\"] = factory();\n\telse\n\t\troot[\"Lazyload\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c2e49d7d0c5543dfb6a9","const Lazyload = require('./lib')\r\n\r\nexport default Lazyload\r\n\r\nmodule.exports = Lazyload.default\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Vue, { PluginObject, VNode, PluginFunction, VNodeDirective, VueConstructor} from 'vue/types'\r\n\r\nimport ImageElement from './ImageElement'\r\n\r\nimport scrollEnd from './scrollEnd'\r\nimport Set from './Set'\r\n\r\nconst scrollListeners = new Set\r\nconst scrollEndListeners = new Set\r\nconst screenHeight = document.documentElement\r\n\r\nwindow.addEventListener('scroll', function (e: UIEvent) {\r\n    scrollListeners.forEach((listener: Function) => {\r\n        listener()\r\n    })\r\n}, true)\r\n\r\nwindow.addEventListener('scrollEnd', function (e: UIEvent) {\r\n    scrollEndListeners.forEach((listener: Function) => {\r\n        listener()\r\n    })\r\n}, true)\r\n\r\nconst compute = function(el: ImageElement, time: number, preload: number = 0, cb: Function = function(){}) {\r\n    const rect = el.getBoundingClientRect()\r\n    if ( ((rect.bottom >= 0 - preload && rect.bottom <= window.screen.height + preload)\r\n        || (rect.top >= 0 - preload && rect.top <= window.screen.height + preload))\r\n    && ((rect.right >=0 && rect.right <= window.screen.width)\r\n        || (rect.left >=0 && rect.left <= window.screen.width)) ) {\r\n        if (el.src != el.newSrc && !!el.newSrc) {\r\n            el.src = el.newSrc\r\n            el.onload = function() {\r\n                el.style.opacity = '1'\r\n                el.onload = function(){}\r\n                scrollListeners.delete(el.__scrollListener__)\r\n                scrollEndListeners.delete(el.__scrollEndListener__)\r\n                el.__scrollListener__ = null\r\n                el.__scrollEndListener__ = null\r\n            }\r\n            el.style.transition = `opacity ${time}ms`\r\n            cb()\r\n        }\r\n    }\r\n}\r\ntype GetSpeedArgs =  {\r\n    lastPos: number,\r\n    lastSpeeds: Array<number>,\r\n    aveSpeed: number,\r\n}\r\nconst getSpeed = function({\r\n    lastPos,\r\n    lastSpeeds,\r\n    aveSpeed,\r\n} : GetSpeedArgs) {\r\n    const clientRect = document.body.getBoundingClientRect()\r\n    const curPos = clientRect.top\r\n    // const curPos = document.body.getBoundingClientRect().top\r\n    let speed = lastPos - curPos\r\n    if(lastSpeeds.length<10){\r\n        lastSpeeds.push(speed)\r\n    }else{\r\n        lastSpeeds.shift()\r\n        lastSpeeds.push(speed)\r\n    }\r\n    let sumSpeed = 0\r\n    lastSpeeds.forEach(function(speed: number){\r\n        sumSpeed += speed\r\n    })\r\n    aveSpeed = Math.abs(sumSpeed/lastSpeeds.length)\r\n    lastPos = curPos\r\n    return {\r\n        lastPos,\r\n        lastSpeeds,\r\n        aveSpeed,\r\n    }\r\n}\r\nconst compareSrc = function(src: string, newSrc: string) {\r\n    if (src.replace(/^http:/,'').replace(/^https:/,'').match(newSrc.replace(/^http:/,'').replace(/^https:/,'')))\r\n        return true\r\n    else \r\n        return false\r\n}\r\ntype LazyLoadOptions = {\r\n    time?: number,\r\n    fade?: boolean,\r\n    speed?: number,\r\n    preload?: number,\r\n}\r\nconst Lazyload:PluginObject<LazyLoadOptions> = {\r\n    install: (Vue: VueConstructor, {\r\n        time = 300,\r\n        fade = false,\r\n        speed = 0,\r\n        preload = 0,\r\n    }: LazyLoadOptions) => {\r\n        if (speed > 0)\r\n            scrollEnd()\r\n        Vue.directive('lazyload', {\r\n            inserted (el: ImageElement, binding: VNodeDirective, vnode: VNode, oldVnode: VNode) {\r\n                if (!el) return\r\n                if (compareSrc(el.src, binding.value)) return\r\n                if (fade)\r\n                    el.style.opacity = '0'\r\n                if (!el.src) {\r\n                    el.src = 'data:image/gifbase64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='\r\n                }\r\n                let speedInfo = {\r\n                    lastPos: document.body.getBoundingClientRect().top,\r\n                    lastSpeeds: [],\r\n                    aveSpeed: 0,\r\n                } as GetSpeedArgs\r\n                el.newSrc = binding.value\r\n                const computeBySpeed = function () {\r\n                    if(!el.newSrc || el.newSrc === el.src)return\r\n                    if (speed == 0) {\r\n                        compute(el, time, preload) \r\n                        return\r\n                    }\r\n                    speedInfo = getSpeed(speedInfo)\r\n                    if(speedInfo.aveSpeed > speed)return\r\n                    compute(el, time, preload)\r\n                }\r\n                const onScrollEnd = function(){\r\n                    if(!el.newSrc || el.newSrc === el.src)return\r\n                    compute(el, time, preload)\r\n                }\r\n                el.__scrollListener__  = computeBySpeed\r\n                el.__scrollEndListener__ = onScrollEnd\r\n                el.onload = function() {\r\n                    el.onload = function(){}\r\n                    el.removeEventListener('error', onError)\r\n                    compute(el, time, preload)\r\n                    scrollListeners.add(computeBySpeed)\r\n                    if (speed > 0)\r\n                        scrollEndListeners.add(onScrollEnd)\r\n                }\r\n                function onError () {\r\n                    el.onload = function(){}\r\n                    el.removeEventListener('error', onError)\r\n                    scrollListeners.delete(computeBySpeed)\r\n                    scrollEndListeners.delete(onScrollEnd)\r\n                }\r\n                el.addEventListener('error', onError)\r\n                // setTimeout(function(){\r\n                //     compute(el, time)\r\n                // })\r\n            },\r\n            update (el: ImageElement, binding: VNodeDirective) {\r\n                if (compareSrc(el.src,binding.value)) return\r\n                el.style.opacity = '0'\r\n                el.style.transition = `opacity ${time/2}ms`\r\n                el.newSrc = binding.value\r\n                setTimeout(() => {\r\n                    compute(el, time/2, preload)\r\n                }, 150)\r\n            },\r\n        })\r\n    }\r\n}\r\n\r\nexport default Lazyload\n\n\n// WEBPACK FOOTER //\n// ./src/lib/index.ts","import ScrollEvent from './ScrollEvent'\r\n\r\nif (!window.requestAnimationFrame) {\r\n    if (window.webkitRequestAnimationFrame) {\r\n        window.requestAnimationFrame = window.webkitRequestAnimationFrame\r\n    } else {\r\n        window.requestAnimationFrame = function requestAnimationFrame (cb) {\r\n            setTimeout(function () {\r\n                cb(0)\r\n            }, 1000 / 60)\r\n            return 0\r\n        }\r\n    }\r\n}\r\nexport default function () {\r\n    let cntr = 0\r\n    let lastCntr = 0\r\n    let diff = 0\r\n    const scrollEnd = document.createEvent('HTMLEvents') as ScrollEvent\r\n    scrollEnd.initEvent('scrollEnd',true, false)\r\n    scrollEnd.eventType = 'message'\r\n    function enterFrame(){\r\n        if (cntr !== lastCntr) {\r\n            diff++\r\n            if (diff === 5) {\r\n                window.dispatchEvent(scrollEnd)\r\n                cntr = lastCntr\r\n            }\r\n        }\r\n        requestAnimationFrame(enterFrame)\r\n    }\r\n    window.requestAnimationFrame(enterFrame)\r\n    window.addEventListener('scroll', () => {\r\n        lastCntr = cntr;\r\n        diff = 0;\r\n        cntr++;\r\n    })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/scrollEnd.ts","// simple Set\r\n// will boom on server =.=\r\nlet cid = 0\r\nexport default class Set {\r\n    private _map: {[cid: number ] : any}\r\n    constructor () {\r\n        this._map = {}\r\n    }\r\n    add (obj: any) {\r\n        obj.__cid__ = cid\r\n        cid++\r\n        this._map[obj.__cid__] = obj\r\n    }\r\n    delete (obj: any) {\r\n        if (obj && obj.__cid__ && this._map.hasOwnProperty(obj.__cid__))\r\n            delete this._map[obj.__cid__]\r\n    }\r\n    forEach (cb: Function) {\r\n        for (let key in this._map) {\r\n            if (this._map.hasOwnProperty(key)) {\r\n                cb (this._map[key])\r\n            }\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Set.ts"],"sourceRoot":""}